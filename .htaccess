# Mengaktifkan modul Rewrite Engine Apache
RewriteEngine On

# Menentukan direktori dasar proyek (PENTING KARENA PROYEK ADA DI SUBFOLDER)
RewriteBase /rkas/

## ======================================================================
## 1. ATURAN KEAMANAN DASAR
## ======================================================================

# Mencegah browser menampilkan daftar file dalam sebuah direktori
Options -Indexes

# Mencegah akses langsung ke file .htaccess ini dari browser
<Files .htaccess>
    Require all denied
</Files>

# Mencegah akses langsung ke file konfigurasi database Anda
<Files config/db.php>
    Require all denied
</Files>


## ======================================================================
## 2. ATURAN PRETTY URL (FRONT CONTROLLER)
## ======================================================================
# Aturan ini akan mengarahkan semua permintaan yang BUKAN file atau direktori
# yang ada secara fisik, ke file index.php sebagai pusat kendali (router).

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]


## ======================================================================
## 3. PENGATURAN CACHE BROWSER (OPSIONAL, UNTUK PERFORMA)
## ======================================================================
# Memberitahu browser untuk menyimpan file statis (gambar, css, js)
# agar tidak perlu diunduh berulang kali.

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
</IfModule>